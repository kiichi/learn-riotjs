<app>
    <div class="row">
        <div class="column column-20">
                <h2>{state.structure.Title}</h2>
                <ol>
                    <li each="{chapter in state.structure.Chapters}" if="{chapter.Type === 'Content'}">
                        <a href="#" onclick="{()=>menuClicked(chapter)}">{chapter.Title}</a>
                    </li>
                </ol>
        </div>
        <div class="column column-80">
            <content md="{state.src}"></content>
        </div>
    </div>
    <script>
        export default {
            state: {
                src: '', //
                structure:[]
            },
            async onMounted(){
                this.state.structure = await this.service.getStructure();
                await this.loadChapter(this.state.structure.Chapters[5]);
                this.update();
            },
            async menuClicked(chapter){
                await this.loadChapter(chapter);
                this.update();
            },
            async loadChapter(chapter){
                console.log(chapter)
                this.state.src = await this.publisher.getSource(chapter.Contents);
            }
        }
    </script>
</app>